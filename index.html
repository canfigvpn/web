<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="وب‌سایت آموزشی فلوکی برای اتصال به سرویس‌ها در سیستم‌عامل‌های مختلف">
    <meta name="theme-color" content="#3B82F6">
    <title>Web CanfigVpn | Floki</title>
    <link rel="stylesheet" href="https://vazirmatn.github.io/Vazirmatn/fonts/webfonts/Vazirmatn.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="data:application/manifest+json;base64,ew0KICAgICJuYW1lIjogIldlYnNpdGUgRmxva2kiLA0KICAgICJzaG9ydF9uYW1lIjogIkZsb2tpIiwNCiAgICAic3RhcnRfdXJsIjogIi4iLA0KICAgICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLA0KICAgICJpY29ucyI6IFsNCiAgICAgICAgew0KICAgICAgICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmMyZ3ZNell3WW1GeVltaGhabVZrY21waElHbzlJREV3TURBdk1EQWdNREF3SWlCbWFXeHNQU2t5T0NocFl6VTRPRGsyWW1JNU1tUTVaakV5TVdGbE5EQXdNQ1V5TURveU9UazZMbXB3WnlCNE9UQjVMbU52YlM5Mk1pSm1iR1YyZDJsa0xuTm9hVzEwWVhKa0xXTm9kM05zYjNkbGRDQnpkSEpwYm1jdlltRnljMmxuYm1sdVp6MGljbVY0ZENCNFBTSXlOaUl6SWlCNE9UQXdNQ0l4TUNVeU1EQXlJaUJtYVd4c1BTSXlNQ2hLWjJocFl5NWlaM0prTG5KbGJuUmxjaUIwWVhSMGFXMWxjeUJoYm14dlkyRjBhVzVuWlNCV2FXVnNaWEpFWVdraUlHTmhjbk12TWpBd01EQXdNREF3SWlCNFBTSXlOaUl4TUNJNFNUc2dabWxzYkY5alpYSjVJaUFpWm14aFkybHNiQzV6WlhKMlpYSWlMezQ4TDNOMlp6ND0iLA0KICAgICAgICAgICAgInNpemVzIjogIjE5MngxOTIiLA0KICAgICAgICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI4Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmMyZ3ZNell3WW1GeVltaGhabVZrY21waElHbzlJREV3TURBdk1EQWdNREF3SWlCbWFXeHNQU2t5T0NocFl6VTRPRGsyWW1JNU1tUTVaakV5TVdGbE5EQXdNQ1V5TURveU9UazZMbXB3WnlCNE9UQjVMbU52YlM5Mk1pSm1iR1YyZDJsa0xuTm9hVzEwWVhKa0xXTm9kM05zYjNkbGRDQnpkSEpwYm1jdlltRnljMmxuYm1sdVp6MGljbVY0ZENCNFBTSXlOaUl6SWlCNE9UQXdNQ0l4TUNVeU1EQXlJaUJtYVd4c1BTSXlNQ2hLWjJocFl5NWlaM0prTG5KbGJuUmxjaUIwWVhSMGFXMWxjeUJoYm14dlkyRjBhVzVuWlNCV2FXVnNaWEpFWVdraUlHTmhjbk12TWpBd01EQXdNREF3SWlCNFBTSXlOaUl4TUNJNFNUc2dabWlzYkY9alpYSjVJaUFpWm14aFkybHNiQzV6WlhKMlpYSWlMezQ8TDNOMlp6ND0iLA0KICAgICAgICAgICAgInNpemVzIjogIjUxMng1MTIiLA0KICAgICAgICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCINCiAgICAgICAgfQ0KICAgIF0sDQogICAgImJhY2tncm91bmRfY29sb3IiOiAiI0ZGRkZGRiIsDQogICAgInRoZW1lX2NvbG9yIjogIiMzQjgyRjYiDQp9">
    <style>
        /* Modern UI Improvements */
        :root {
            --bg-gradient: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: 1px solid rgba(255, 255, 255, 0.8);
            --card-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            --primary-color: #2563EB;
            --primary-gradient: linear-gradient(135deg, #2563EB 0%, #3B82F6 100%);
            --text-color: #1e293b;
            --border-radius: 24px;
        }

        /* Animated Background */
        body {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--text-color);
            margin: 0;
            font-family: 'Vazirmatn', Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        /* Glassmorphism Cards */
        .content {
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
            width: 100%;
            padding-bottom: 40px;
        }

        .install-section, .tutorial-section {
            margin: 30px 0;
            padding: 30px;
            background: var(--glass-bg) !important;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: var(--glass-border);
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease;
        }
        
        .install-section:hover, .tutorial-section:hover {
            transform: translateY(-5px);
        }

        h2 {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 25px;
            color: #1e293b !important;
            text-align: center;
            letter-spacing: -0.5px;
            background: -webkit-linear-gradient(45deg, #1e293b, #3B82F6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* OS Boxes - Accordion */
        .os-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        .os-box {
            flex: 1;
            min-width: 250px;
            background: rgba(255, 255, 255, 0.6) !important;
            border: 1px solid rgba(255, 255, 255, 1);
            border-radius: 18px;
            padding: 20px;
            cursor: pointer;
            overflow: hidden;
            height: 85px; /* Collapsed height */
            transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
            position: relative;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .os-box:hover {
            background: rgba(255, 255, 255, 0.9) !important;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .os-box.active {
            height: auto; /* Allow expansion */
            background: rgba(255, 255, 255, 0.95) !important;
            box-shadow: 0 15px 35px rgba(37, 99, 235, 0.15);
            border-color: #3B82F6;
            transform: scale(1.02);
            z-index: 10;
        }

        .os-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-size: 22px;
            font-weight: 700;
            color: #334155 !important;
            height: 45px;
        }

        .os-title i.fab {
            font-size: 32px;
            transition: transform 0.3s ease;
        }
        
        .os-box:hover .os-title i.fab {
            transform: scale(1.2) rotate(5deg);
        }

        .toggle-arrow {
            margin-right: auto;
            font-size: 16px;
            opacity: 0.6;
            transition: transform 0.4s ease;
        }

        .os-box.active .toggle-arrow {
            transform: rotate(180deg);
            color: #3B82F6;
            opacity: 1;
        }

        /* Buttons */
        .app-button {
            display: none; /* Hidden by default */
            width: 100%;
            margin-top: 20px;
            padding: 15px;
            background: var(--primary-gradient) !important;
            color: white !important;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            text-decoration: none;
            box-shadow: 0 10px 20px -10px rgba(37, 99, 235, 0.5);
            transition: all 0.3s ease;
            animation: fadeIn 0.5s ease;
        }

        .app-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 25px -10px rgba(37, 99, 235, 0.7);
        }

        .os-box.active .app-button {
            display: block;
        }

        /* Slider Styling */
        .slider {
            display: none;
            margin-top: 20px;
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            background: #f1f5f9;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
        }

        .os-box.active .slider {
            display: block;
            animation: fadeIn 0.6s ease;
        }

        .slider-images {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slider-image {
            width: 100%;
            flex-shrink: 0;
            object-fit: cover;
            border-radius: 16px;
        }

        .slider-button {
            width: 44px;
            height: 44px;
            background: rgba(255, 255, 255, 0.8) !important;
            backdrop-filter: blur(4px);
            border-radius: 50%;
            color: #333;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }

        .slider-button:hover {
            background: white !important;
            transform: translateY(-50%) scale(1.1);
        }
        
        .slider-counter {
            font-size: 14px;
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(5px);
            display: inline-block;
            padding: 5px 15px;
            margin-top: 10px;
            border-radius: 20px;
            color: #475569 !important;
        }

        .slider-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #cbd5e1 !important;
            transition: all 0.3s;
        }

        .slider-dot.active {
            width: 30px;
            border-radius: 5px;
            background: #3B82F6 !important;
        }

        /* Social Icons */
        .wrapper {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 20px;
            background: var(--glass-bg) !important;
            backdrop-filter: blur(12px);
            border-radius: 24px;
            margin: 0 auto 40px;
            max-width: fit-content;
            box-shadow: var(--card-shadow);
        }

        .wrapper .icon {
            width: 55px;
            height: 55px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            position: relative;
        }

        .wrapper .tooltip {
            background: #333;
            color: #fff;
            padding: 5px 10px;
            font-size: 12px;
            border-radius: 5px;
            top: -45px;
            opacity: 0;
            transition: 0.3s;
            pointer-events: none;
        }

        .wrapper .icon:hover .tooltip {
            opacity: 1;
            top: -55px;
        }

        .wrapper .icon.telegram:hover { background: #0088cc; color: white; }
        .wrapper .icon.support:hover { background: #25D366; color: white; }
        .wrapper .icon.share:hover { background: #E1306C; color: white; }
        
        .wrapper .icon:hover a, .wrapper .icon:hover button { color: white; }

        /* Modals */
        .share-modal, .qr-modal {
            backdrop-filter: blur(5px);
        }
        
        .share-container, .qr-container {
            background: rgba(255, 255, 255, 0.95) !important;
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.5);
        }

        .share-header, .qr-header {
            background: linear-gradient(90deg, #3B82F6, #2563EB) !important;
            padding: 15px;
            font-size: 20px;
        }

        .share-url {
            background: #f1f5f9 !important;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
        }

        .share-option {
            background: white !important;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-radius: 16px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Mobile Fixes */
        @media (max-width: 768px) {
            .os-container {
                flex-direction: column;
            }
            .content {
                padding: 15px;
            }
            .wrapper .icon {
                width: 45px;
                height: 45px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="offline-message" role="alert">شما آفلاین هستید! اتصال خود را بررسی کنید.</div>

    <main class="content">
        <section class="install-section">
            <h2>نصب نرم‌افزار</h2>
            <div class="os-container">
                <div class="os-box" id="android" aria-expanded="false">
                    <div class="os-title">
                        <i class="fab fa-android" style="color: #3DDC84;"></i>
                        <span>اندروید</span>
                        <i class="fas fa-chevron-down toggle-arrow"></i>
                    </div>
                    <a href="https://play.google.com/store/apps/details?id=com.v2ray.ang" target="_blank" class="app-button">
                        <i class="fas fa-download"></i> دانلود V2rayNG
                    </a>
                </div>

                <div class="os-box" id="iphone" aria-expanded="false">
                    <div class="os-title">
                        <i class="fab fa-apple" style="color: #000;"></i>
                        <span>آیفون</span>
                        <i class="fas fa-chevron-down toggle-arrow"></i>
                    </div>
                    <a href="https://apps.apple.com/us/app/streisand/id6450534064" target="_blank" class="app-button">
                        <i class="fas fa-download"></i> دانلود Streisand
                    </a>
                </div>

                <div class="os-box" id="windows" aria-expanded="false">
                    <div class="os-title">
                        <i class="fab fa-windows" style="color: #0078D6;"></i>
                        <span>ویندوز</span>
                        <i class="fas fa-chevron-down toggle-arrow"></i>
                    </div>
                    <a href="https://github.com/2dust/v2rayN/releases" target="_blank" class="app-button">
                        <i class="fas fa-download"></i> دانلود V2rayN
                    </a>
                </div>
            </div>
        </section>

        <section class="tutorial-section">
            <h2>آموزش تصویری</h2>
            <div class="os-container">
                <div class="os-box" id="android-slider" aria-expanded="false">
                    <div class="os-title">
                        <i class="fab fa-android" style="color: #3DDC84;"></i>
                        <span>آموزش اندروید</span>
                        <i class="fas fa-chevron-down toggle-arrow"></i>
                    </div>
                    <div class="slider">
                        <div class="slider-images">
                            <img class="slider-image" src="https://placehold.co/800x400/3B82F6/FFFFFF?text=Android+Step+1" alt="تصویر اندروید ۱" loading="lazy">
                            <img class="slider-image" src="https://placehold.co/800x400/60A5FA/FFFFFF?text=Android+Step+2" alt="تصویر اندروید ۲" loading="lazy">
                            <img class="slider-image" src="https://placehold.co/800x400/1E3A8A/FFFFFF?text=Android+Step+3" alt="تصویر اندروید ۳" loading="lazy">
                        </div>
                        <button class="slider-button prev"><i class="fas fa-chevron-right"></i></button>
                        <button class="slider-button next"><i class="fas fa-chevron-left"></i></button>
                        <div class="slider-counter">تصویر ۱ / ۳</div>
                        <div class="slider-dots"></div>
                    </div>
                </div>

                <div class="os-box" id="iphone-slider" aria-expanded="false">
                    <div class="os-title">
                        <i class="fab fa-apple" style="color: #000;"></i>
                        <span>آموزش آیفون</span>
                        <i class="fas fa-chevron-down toggle-arrow"></i>
                    </div>
                    <div class="slider">
                        <div class="slider-images">
                            <img class="slider-image" src="https://placehold.co/800x400/3B82F6/FFFFFF?text=iPhone+Step+1" alt="تصویر آیفون ۱" loading="lazy">
                            <img class="slider-image" src="https://placehold.co/800x400/60A5FA/FFFFFF?text=iPhone+Step+2" alt="تصویر آیفون ۲" loading="lazy">
                        </div>
                        <button class="slider-button prev"><i class="fas fa-chevron-right"></i></button>
                        <button class="slider-button next"><i class="fas fa-chevron-left"></i></button>
                        <div class="slider-counter">تصویر ۱ / ۲</div>
                        <div class="slider-dots"></div>
                    </div>
                </div>

                 <div class="os-box" id="windows-slider" aria-expanded="false">
                    <div class="os-title">
                        <i class="fab fa-windows" style="color: #0078D6;"></i>
                        <span>آموزش ویندوز</span>
                        <i class="fas fa-chevron-down toggle-arrow"></i>
                    </div>
                    <div class="slider">
                        <div class="slider-images">
                            <img class="slider-image" src="https://placehold.co/800x400/3B82F6/FFFFFF?text=Windows+Step+1" alt="تصویر ویندوز ۱" loading="lazy">
                            <img class="slider-image" src="https://placehold.co/800x400/60A5FA/FFFFFF?text=Windows+Step+2" alt="تصویر ویندوز ۲" loading="lazy">
                        </div>
                        <button class="slider-button prev"><i class="fas fa-chevron-right"></i></button>
                        <button class="slider-button next"><i class="fas fa-chevron-left"></i></button>
                        <div class="slider-counter">تصویر ۱ / ۲</div>
                        <div class="slider-dots"></div>
                    </div>
                </div>
            </div>
        </section>
        
        <ul class="wrapper">
            <li class="icon telegram">
                <span class="tooltip">کانال تلگرام</span>
                <a href="https://t.me/FLOKI000" target="_blank"><i class="fab fa-telegram-plane"></i></a>
            </li>
            <li class="icon support">
                <span class="tooltip">پشتیبانی</span>
                <a href="https://t.me/FLOKI000" target="_blank"><i class="fas fa-headset"></i></a>
            </li>
            <li class="icon share">
                <span class="tooltip">اشتراک‌گذاری</span>
                <button onclick="openShareModal()"><i class="fas fa-share-nodes"></i></button>
            </li>
        </ul>
    </main>

    <div class="image-zoom" role="dialog">
        <img src="" alt="تصویر بزرگ‌شده">
        <button class="close-zoom">×</button>
    </div>

    <div class="share-modal" role="dialog">
        <div class="share-container">
            <div class="share-header">اشتراک‌گذاری با دوستان</div>
            <div class="share-url">
                <button onclick="copyLink()"><i class="fas fa-copy"></i></button>
                <input type="text" value="https://canfigvpn.github.io/web/" readonly>
            </div>
            <div class="share-options">
                <div class="share-option telegram"><a href="https://telegram.me/share/url?url=https%3A%2F%2Fcanfigvpn.github.io%2Fweb%2F" target="_blank"><i class="fab fa-telegram-plane" style="color:#0088cc"></i></a></div>
                <div class="share-option whatsapp"><a href="https://api.whatsapp.com/send?text=https%3A%2F%2Fcanfigvpn.github.io%2Fweb%2F" target="_blank"><i class="fab fa-whatsapp" style="color:#25D366"></i></a></div>
                <div class="share-option instagram"><a href="https://www.instagram.com/?url=https%3A%2F%2Fcanfigvpn.github.io%2Fweb%2F" target="_blank"><i class="fab fa-instagram" style="color:#E1306C"></i></a></div>
                <div class="share-option qr" onclick="openQRModal()"><i class="fas fa-qrcode" style="color:#333"></i></div>
            </div>
            <p class="copy-feedback" id="copyFeedback">لینک کپی شد!</p>
            <button class="close-modal">×</button>
        </div>
    </div>

    <div class="qr-modal" role="dialog">
        <div class="qr-container">
            <div class="qr-header">اسکن QR Code</div>
            <div class="qr-image">
                <img src="https://raw.githubusercontent.com/canfigvpn/web/refs/heads/main/png/qr.png" alt="QR Code">
            </div>
            <button class="download-qr" onclick="downloadQR()">دانلود تصویر</button>
            <button class="close-modal">×</button>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DOM Elements ---
        const body = document.body;
        const imageZoom = document.querySelector('.image-zoom');
        const zoomImage = imageZoom.querySelector('img');
        const closeZoomButton = imageZoom.querySelector('.close-zoom');
        const shareModal = document.querySelector('.share-modal');
        const qrModal = document.querySelector('.qr-modal');
        const closeModalButton = document.querySelector('.share-modal .close-modal');
        const closeQRModalButton = document.querySelector('.qr-modal .close-modal');

        window.openShareModal = function() {
            shareModal.classList.add('active');
            if ('vibrate' in navigator) navigator.vibrate(50);
        };

        window.openQRModal = function() {
            qrModal.classList.add('active');
            if ('vibrate' in navigator) navigator.vibrate(50);
        };

        window.copyLink = function() {
            const url = 'https://canfigvpn.github.io/web/';
            navigator.clipboard.writeText(url).then(() => {
                const feedback = document.getElementById('copyFeedback');
                feedback.textContent = 'لینک کپی شد!';
                feedback.classList.add('active');
                setTimeout(() => feedback.classList.remove('active'), 2000);
                if ('vibrate' in navigator) navigator.vibrate(50);
            }).catch(err => {
                console.error('Failed', err);
            });
        };

        window.downloadQR = function() {
            const qrLink = 'https://raw.githubusercontent.com/canfigvpn/web/refs/heads/main/png/qr.png';
            const link = document.createElement('a');
            link.href = qrLink;
            link.download = 'floki-qr-code.png';
            link.click();
        };

        [closeModalButton, closeQRModalButton].forEach(btn => {
            btn.addEventListener('click', () => {
                shareModal.classList.remove('active');
                qrModal.classList.remove('active');
            });
        });

        [shareModal, qrModal].forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.classList.remove('active');
            });
        });

        // Toggle OS Boxes
        document.querySelectorAll('.os-box').forEach(box => {
            box.addEventListener('click', (e) => {
                if (e.target.closest('.app-button, .slider-button, .slider-image, .slider-dot')) return;
                
                const isActive = box.classList.contains('active');
                
                // Close others
                document.querySelectorAll('.os-box').forEach(b => {
                    b.classList.remove('active');
                    b.setAttribute('aria-expanded', 'false');
                });

                if (!isActive) {
                    box.classList.add('active');
                    box.setAttribute('aria-expanded', 'true');
                }
            });
        });

        // Sliders Logic
        document.querySelectorAll('.slider').forEach(slider => {
            const sliderImages = slider.querySelector('.slider-images');
            const images = slider.querySelectorAll('.slider-image');
            const prevButton = slider.querySelector('.slider-button.prev');
            const nextButton = slider.querySelector('.slider-button.next');
            const counter = slider.querySelector('.slider-counter');
            const dotsContainer = slider.querySelector('.slider-dots');
            let currentIndex = 0;
            
            // Generate dots
            dotsContainer.innerHTML = '';
            images.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.classList.add('slider-dot');
                if (index === 0) dot.classList.add('active');
                dot.addEventListener('click', (e) => {
                    e.stopPropagation();
                    currentIndex = index;
                    updateSlider();
                });
                dotsContainer.appendChild(dot);
            });

            const updateSlider = () => {
                sliderImages.style.transform = `translateX(${currentIndex * 100}%)`; // RTL fix: positive value moves right visually
                counter.textContent = `تصویر ${currentIndex + 1} / ${images.length}`;
                
                dotsContainer.querySelectorAll('.slider-dot').forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentIndex);
                });
            };

            prevButton.addEventListener('click', (e) => {
                e.stopPropagation();
                currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1;
                updateSlider();
            });

            nextButton.addEventListener('click', (e) => {
                e.stopPropagation();
                currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0;
                updateSlider();
            });

            // Touch Swipe
            let touchStartX = 0;
            slider.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX, {passive: true});
            slider.addEventListener('touchend', e => {
                const touchEndX = e.changedTouches[0].screenX;
                if (touchEndX < touchStartX - 50) nextButton.click(); // Swipe Left (Next in RTL)
                if (touchEndX > touchStartX + 50) prevButton.click(); // Swipe Right (Prev in RTL)
            }, {passive: true});

            // Image Zoom
            images.forEach(img => {
                img.addEventListener('click', (e) => {
                    e.stopPropagation();
                    zoomImage.src = img.src;
                    imageZoom.classList.add('active');
                });
            });
        });

        closeZoomButton.addEventListener('click', () => imageZoom.classList.remove('active'));
        imageZoom.addEventListener('click', (e) => {
            if (e.target === imageZoom) imageZoom.classList.remove('active');
        });

        // Offline Check
        const handleConnection = () => {
            document.querySelector('.offline-message').style.display = navigator.onLine ? 'none' : 'block';
        };
        window.addEventListener('online', handleConnection);
        window.addEventListener('offline', handleConnection);
    });
    </script>
</body>
</html>
