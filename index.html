<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Floki VPN | Gold Live Edition</title>
    <link rel="stylesheet" href="https://vazirmatn.github.io/Vazirmatn/fonts/webfonts/Vazirmatn.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --gold-primary: #d4af37;
            --gold-light: #f9e29d;
            --gold-dark: #aa841e;
            --gold-gradient: linear-gradient(135deg, #f9e29d 0%, #d4af37 45%, #aa841e 100%);
            --black-bg: #0a0a0a;
            --glass-black: rgba(20, 20, 20, 0.9);
            --text-white: #ffffff;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; font-family: 'Vazirmatn', sans-serif;
            background-color: var(--black-bg); color: var(--text-white);
            background-image: radial-gradient(circle at 50% 50%, #1a1a1a 0%, #0a0a0a 100%);
            overflow-x: hidden; padding-bottom: 120px;
        }

        /* ذرات معلق پس‌زمینه */
        #particles { position: fixed; inset: 0; z-index: -1; pointer-events: none; }
        .particle { position: absolute; background: var(--gold-primary); border-radius: 50%; opacity: 0.3; animation: float 15s infinite linear; }
        @keyframes float { from { transform: translateY(100vh); } to { transform: translateY(-10vh); } }

        .content { padding: 20px; width: 100%; margin: 0 auto; max-width: 1000px; }

        h2 { font-size: 1.3rem; color: var(--gold-primary); display: flex; align-items: center; gap: 10px; margin-bottom: 25px; }
        h2::after { content: ''; flex: 1; height: 1px; background: linear-gradient(to left, var(--gold-dark), transparent); opacity: 0.3; }

        .glass-section {
            background: var(--glass-black); backdrop-filter: blur(15px);
            border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 30px;
            padding: 25px; margin-bottom: 30px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
        }

        /* بخش سرورهای زنده */
        .server-grid { display: grid; gap: 12px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
        .server-card {
            background: #111; border: 1px solid #222; border-radius: 18px; padding: 15px;
            display: flex; align-items: center; justify-content: space-between; transition: 0.3s;
        }
        .server-card:hover { border-color: var(--gold-primary); transform: translateY(-3px); }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: #10B981; box-shadow: 0 0 10px #10B981; }

        /* آکاردئون هوشمند */
        .os-box { background: #111; border: 1px solid #222; border-radius: 20px; overflow: hidden; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); max-height: 70px; cursor: pointer; margin-bottom: 12px; }
        .os-box.active { max-height: 800px; border-color: var(--gold-primary); box-shadow: 0 0 20px rgba(212, 175, 55, 0.1); }
        .os-title { height: 70px; display: flex; align-items: center; padding: 0 20px; justify-content: space-between; }
        .os-title div { display: flex; align-items: center; gap: 12px; font-weight: bold; }
        .os-title i { font-size: 1.5rem; color: var(--gold-primary); }

        /* اسلایدر */
        .slider { margin: 15px; position: relative; border-radius: 15px; overflow: hidden; border: 1px solid #333; }
        .slider-images { display: flex; transition: 0.5s ease; aspect-ratio: 16/9; }
        .slider-image { width: 100%; flex-shrink: 0; object-fit: cover; }
        .slider-btn { position: absolute; top: 50%; transform: translateY(-50%); width: 35px; height: 35px; border-radius: 50%; background: rgba(0,0,0,0.7); border: 1px solid var(--gold-primary); color: var(--gold-primary); cursor: pointer; z-index: 5; }

        /* داک پایین */
        .dock-container { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); z-index: 1000; }
        .dock-wrapper { display: flex; gap: 20px; padding: 12px 25px; background: rgba(15, 15, 15, 0.95); backdrop-filter: blur(15px); border: 1px solid var(--gold-primary); border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.8); }
        .dock-item { width: 50px; height: 50px; border-radius: 15px; display: flex; justify-content: center; align-items: center; font-size: 1.4rem; color: var(--gold-primary); background: #222; border: 1px solid #333; cursor: pointer; transition: 0.3s; }
        .dock-item:hover { transform: translateY(-10px); background: var(--gold-gradient); color: #000; }

        /* مودال‌ها */
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal-box { background: #111; width: 100%; max-width: 400px; border-radius: 25px; border: 1px solid var(--gold-primary); overflow: hidden; }
        .modal-header { background: var(--gold-gradient); color: #000; padding: 15px; text-align: center; font-weight: 800; }

        .loader { border: 3px solid #222; border-top: 3px solid var(--gold-primary); border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 20px auto; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="particles"></div>

    <main class="content">
        <section class="glass-section">
            <h2><i class="fas fa-satellite-dish"></i> وضعیت زنده سرورها</h2>
            <div id="loading-servers" class="loader"></div>
            <div id="server-container" class="server-grid"></div>
        </section>

        <section class="glass-section">
            <h2><i class="fas fa-graduation-cap"></i> راهنمای اتصال سیستم‌عامل‌ها</h2>
            
            <div class="os-box accordion-item" onclick="toggleAccordion(this)">
                <div class="os-title"><div><i class="fab fa-android"></i> آموزش اندروید</div><i class="fas fa-chevron-down"></i></div>
                <div class="slider" data-idx="0">
                    <div class="slider-images">
                        <img class="slider-image" src="https://placehold.co/600x400/111/d4af37?text=Android+Step+1">
                        <img class="slider-image" src="https://placehold.co/600x400/111/d4af37?text=Android+Step+2">
                    </div>
                    <button class="slider-btn" style="right:10px" onclick="moveSlide(event, 1)"><i class="fas fa-chevron-right"></i></button>
                    <button class="slider-btn" style="left:10px" onclick="moveSlide(event, -1)"><i class="fas fa-chevron-left"></i></button>
                </div>
            </div>

            <div class="os-box accordion-item" onclick="toggleAccordion(this)">
                <div class="os-title"><div><i class="fab fa-apple"></i> آموزش آیفون</div><i class="fas fa-chevron-down"></i></div>
                <div class="slider" data-idx="0">
                    <div class="slider-images">
                        <img class="slider-image" src="https://placehold.co/600x400/111/d4af37?text=iOS+Step+1">
                        <img class="slider-image" src="https://placehold.co/600x400/111/d4af37?text=iOS+Step+2">
                    </div>
                    <button class="slider-btn" style="right:10px" onclick="moveSlide(event, 1)"><i class="fas fa-chevron-right"></i></button>
                    <button class="slider-btn" style="left:10px" onclick="moveSlide(event, -1)"><i class="fas fa-chevron-left"></i></button>
                </div>
            </div>

            <div class="os-box accordion-item" onclick="toggleAccordion(this)">
                <div class="os-title"><div><i class="fab fa-windows"></i> آموزش ویندوز</div><i class="fas fa-chevron-down"></i></div>
                <div class="slider" data-idx="0">
                    <div class="slider-images">
                        <img class="slider-image" src="https://placehold.co/600x400/111/d4af37?text=PC+Step+1">
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="dock-container">
        <div class="dock-wrapper">
            <div class="dock-item" onclick="window.open('https://t.me/FLOKI000')"><i class="fab fa-telegram-plane"></i></div>
            <div class="dock-item" onclick="window.open('https://t.me/FLOKI000')"><i class="fas fa-headset"></i></div>
            <div class="dock-item" onclick="openModal('shareModal')"><i class="fas fa-share-nodes"></i></div>
        </div>
    </div>

    <div class="modal-overlay" id="shareModal" onclick="if(event.target===this)this.style.display='none'">
        <div class="modal-box">
            <div class="modal-header">اشتراک‌گذاری سرویس</div>
            <div style="padding: 20px; text-align: center;">
                <div style="display:flex; background:#000; padding:10px; border-radius:12px; border:1px solid #333; margin-bottom:15px;">
                    <input type="text" value="https://canfigvpn.github.io/web/" id="siteLink" readonly style="flex:1; background:none; border:none; color:var(--gold-primary); font-size:12px;">
                    <button onclick="copyToClipboard(document.getElementById('siteLink').value, this)" style="background:var(--gold-primary); border:none; border-radius:8px; padding:5px 10px; font-weight:bold; cursor:pointer;">کپی</button>
                </div>
                <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:10px;">
                    <div class="dock-item" style="width:auto; height:50px;" onclick="openQR()"><i class="fas fa-qrcode"></i></div>
                    <div class="dock-item" style="width:auto; height:50px;" onclick="window.open('https://t.me/share/url?url=https://canfigvpn.github.io/web/')"><i class="fab fa-telegram"></i></div>
                    <div class="dock-item" style="width:auto; height:50px;"><i class="fab fa-whatsapp"></i></div>
                    <div class="dock-item" style="width:auto; height:50px;"><i class="fab fa-instagram"></i></div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="qrModal" onclick="if(event.target===this)this.style.display='none'">
        <div class="modal-box" style="text-align:center;">
            <div class="modal-header">اسکن و ورود</div>
            <div style="padding:20px; background:#fff;"><img id="qrImg" src="" style="width:100%; max-width:200px;"></div>
            <button onclick="this.closest('.modal-overlay').style.display='none'" style="width:100%; padding:15px; border:none; background:#111; color:var(--gold-primary); font-weight:bold; cursor:pointer;">بستن</button>
        </div>
    </div>

    <script>
        // ۱. دریافت سرورها از API
        async function fetchServers() {
            const container = document.getElementById('server-container');
            const loader = document.getElementById('loading-servers');
            try {
                const res = await fetch('https://shadowmere.xyz/api/proxies/?format=json');
                const data = await res.json();
                loader.style.display = 'none';
                data.slice(0, 6).forEach((srv, i) => {
                    const card = document.createElement('div');
                    card.className = 'server-card';
                    card.innerHTML = `
                        <div style="overflow:hidden; margin-left:10px;">
                            <div style="display:flex; align-items:center; gap:8px; font-size:13px; font-weight:bold; color:var(--gold-light);">
                                <div class="status-dot"></div> Server VIP ${i+1}
                            </div>
                            <div style="font-size:10px; color:#666; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; width:150px; margin-top:4px;">${srv.url}</div>
                        </div>
                        <button onclick="copyToClipboard('${srv.url}', this)" style="background:var(--gold-gradient); border:none; border-radius:10px; padding:8px 15px; font-weight:bold; cursor:pointer; font-size:12px;">کپی کانفیگ</button>
                    `;
                    container.appendChild(card);
                });
            } catch (e) { loader.innerHTML = "خطا در اتصال به API"; }
        }

        // ۲. آکاردئون هوشمند
        function toggleAccordion(el) {
            const all = document.querySelectorAll('.accordion-item');
            const isActive = el.classList.contains('active');
            all.forEach(item => item.classList.remove('active'));
            if (!isActive) el.classList.add('active');
        }

        // ۳. اسلایدر
        function moveSlide(e, dir) {
            e.stopPropagation();
            const slider = e.target.closest('.slider');
            const container = slider.querySelector('.slider-images');
            const imgs = container.querySelectorAll('img');
            let idx = parseInt(slider.dataset.idx || 0);
            idx = (idx + dir + imgs.length) % imgs.length;
            container.style.transform = `translateX(${idx * 100}%)`;
            slider.dataset.idx = idx;
        }

        // ۴. اشتراک‌گذاری و ذرات
        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function openQR() {
            const link = document.getElementById('siteLink').value;
            document.getElementById('qrImg').src = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(link)}`;
            document.getElementById('shareModal').style.display = 'none';
            document.getElementById('qrModal').style.display = 'flex';
        }

        function copyToClipboard(text, btn) {
            navigator.clipboard.writeText(text);
            const old = btn.innerText;
            btn.innerText = 'کپی شد';
            setTimeout(() => btn.innerText = old, 2000);
        }

        // ایجاد ذرات معلق
        const pCont = document.getElementById('particles');
        for(let i=0; i<25; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random() * 100 + 'vw';
            p.style.width = p.style.height = (Math.random()*3+1)+'px';
            p.style.animationDuration = (Math.random()*10+10)+'s';
            p.style.animationDelay = (Math.random()*5)+'s';
            pCont.appendChild(p);
        }

        window.onload = fetchServers;
    </script>
</body>
</html>
